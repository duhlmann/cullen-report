<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cullen Commission — 101 Recommendations Tracker</title>
  <style>
    :root{
      --bg:#0b0f19; --card:#121827; --muted:#9aa4b2; --text:#e5e7eb;
      --accent:#6ee7b7; --warn:#facc15; --todo:#ef4444; --unknown:#6b7280;
      --tooltip:#111827; --tooltip-text:#e5e7eb; --tooltip-shadow:0 8px 24px rgba(0,0,0,.35); --link:#93c5fd;
    }
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    h1{margin:0 0 8px} p{color:var(--muted);margin:0 0 16px}
    .card{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.2)}
    .legend{display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
    .legend-item{display:flex;align-items:center;gap:6px;color:var(--muted);font-size:14px}
    .swatch{width:14px;height:14px;border-radius:4px;display:inline-block}
    #grid{display:grid;grid-template-columns: repeat(10, 1fr);gap:6px;margin-top:12px}
    .cell{width:30px;height:30px;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:bold;color:#000;user-select:none;outline:none}
    .cell:focus{box-shadow:0 0 0 2px rgba(255,255,255,.25)}
    .done{background:var(--accent)} .progress{background:var(--warn)} .todo{background:var(--todo)} .unknown{background:var(--unknown);color:#fff}
    .note{color:var(--muted);font-size:12px;margin-top:10px;line-height:1.4}
    .tooltip{position:fixed;z-index:9999;max-width:min(520px,92vw);background:var(--tooltip);color:var(--tooltip-text);padding:10px 12px;border-radius:10px;box-shadow:var(--tooltip-shadow);font-size:12px;line-height:1.35;display:none;pointer-events:none}
    .tooltip strong{font-weight:600}.tooltip .status{opacity:.9;font-style:italic;display:block;margin-top:6px}
    .tooltip .sources{margin-top:8px;border-top:1px solid rgba(255,255,255,.08);padding-top:6px}
    .tooltip .sources-title{font-size:11px;opacity:.8;margin-bottom:4px;display:block}
    .tooltip .sources ul{margin:0;padding-left:16px}
    .tooltip a{color:var(--link);text-decoration:underline;word-break:break-word}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Cullen Commission — 101 Recommendations Tracker</h1>
    <p>Hover or focus a box to see the full recommendation text, status, and sources. Gray = not yet verified from public sources.</p>

    <div class="card">
      <div class="legend" aria-hidden="true">
        <div class="legend-item"><span class="swatch" style="background:var(--accent)"></span> Done (verified)</div>
        <div class="legend-item"><span class="swatch" style="background:var(--warn)"></span> In&nbsp;Progress (verified)</div>
        <div class="legend-item"><span class="swatch" style="background:var(--unknown)"></span> Unknown / Unverified</div>
        <div class="legend-item"><span class="swatch" style="background:var(--todo)"></span> Not&nbsp;Done (verified gap)</div>
      </div>

      <div id="grid" role="grid" aria-label="Cullen recommendations grid"></div>
      <div class="note">We only color items where we’ve found solid sources. Everything else stays gray until verified.</div>
    </div>
  </div>

  <div id="tooltip" class="tooltip" role="tooltip" aria-hidden="true"></div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      alert('JS is running');
      /* --- Data --- */
      const recommendations = Array.from({ length: 101 }, (_, i) => `Rec ${i + 1}`);
      const statusByRec = { 4:"todo", 2:"done", 5:"progress", 25:"done", 33:"done" };

      // Each entry is an array of [title, url] pairs (you can add more pairs per rec)
      const sourcesByRec = {
        2: [["BC Gov – Public Safety: Deputy Ministers’ Committee on AML maintained","https://www2.gov.bc.ca/gov/content/justice/anti-money-laundering/quick-glance-government-actions/public-safety"]],
        4: [["BC Gov – Gambling: Source-of-funds threshold remains $10,000 (Cullen asked for $3,000)","https://www2.gov.bc.ca/gov/content/justice/anti-money-laundering/quick-glance-government-actions/gambling"]],
        5: [["BC Gov – Gambling: Casinos phasing in account-based known play, target 100% by 2029","https://www2.gov.bc.ca/gov/content/justice/anti-money-laundering/quick-glance-government-actions/gambling"]]
      };

      /* --- DOM refs --- */
      const grid = document.getElementById('grid');
      const tooltip = document.getElementById('tooltip');

      /* --- Helpers --- */
      function escapeHTML(str){
        return String(str).replace(/[&<>"]/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[s]));
      }
      function showTooltip(target, html){
        tooltip.innerHTML = html;
        tooltip.style.display = 'block';
        tooltip.setAttribute('aria-hidden','false');
        const rect = target.getBoundingClientRect();
        const pad = 8;
        const ttRect = tooltip.getBoundingClientRect();
        let top = rect.top - ttRect.height - pad;
        if (top < 8) top = rect.bottom + pad;
        let left = rect.left + (rect.width - ttRect.width)/2;
        left = Math.max(8, Math.min(left, window.innerWidth - ttRect.width - 8));
        tooltip.style.top = `${top + window.scrollY}px`;
        tooltip.style.left = `${left + window.scrollX}px`;
      }
      function hideTooltip(){
        tooltip.style.display = 'none';
        tooltip.setAttribute('aria-hidden','true');
        tooltip.innerHTML = '';
      }
      function renderSources(recNum){
        const src = sourcesByRec[recNum];
        let out = `<div class="sources"><span class="sources-title">Sources:</span><ul>`;
        if (Array.isArray(src) && src.length){
          for (const pair of src){
            if (Array.isArray(pair)){
              const [label, url] = pair;
              out += `<li>${escapeHTML(label)} — <a href="${escapeHTML(url)}" target="_blank" rel="noopener noreferrer">${escapeHTML(url)}</a></li>`;
            } else {
              // fallback if someone passes a plain string
              out += `<li>${escapeHTML(pair)}</li>`;
            }
          }
        } else {
          out += `<li><em>not yet verified</em></li>`;
        }
        out += `</ul></div>`;
        return out;
      }

      /* --- Build the grid --- */
      for (let n = 1; n <= 101; n++) {
        const status = statusByRec[n] || "unknown";
        const cell = document.createElement('div');
        cell.className = `cell ${status}`;
        cell.textContent = n;
        cell.setAttribute('role','gridcell');
        cell.setAttribute('tabindex','0');

        const label =
          status === 'done' ? 'Done (verified)' :
          status === 'progress' ? 'In Progress (verified)' :
          status === 'todo' ? 'Not Done (verified gap)' :
          'Unknown / Unverified';

        const recText = recommendations[n-1] || `Recommendation ${n}`;
        cell.title = recText; // native tooltip fallback

        let html = `<strong>${escapeHTML(recText)}</strong><span class="status">${label}</span>`;
        html += renderSources(n);

        cell.addEventListener('mouseenter', () => showTooltip(cell, html));
        cell.addEventListener('focus', () => showTooltip(cell, html));
        cell.addEventListener('mouseleave', hideTooltip);
        cell.addEventListener('blur', hideTooltip);

        grid.appendChild(cell);
      }

      window.addEventListener('scroll', hideTooltip, {passive:true});
      window.addEventListener('resize', hideTooltip);
      window.addEventListener('keydown', (e) => { if (e.key === 'Escape') hideTooltip(); });
    });
 
<script>
  // draw one green cell so we know the grid works
  const grid = document.getElementById('grid');
  grid.innerHTML = ''; // clear anything old

  const cell = document.createElement('div');
  cell.className = 'cell done'; // green
  cell.textContent = '1';
  cell.setAttribute('tabindex','0');

<script>
  // DIAGNOSTIC: do we see the grid? can we write into it?
  const grid = document.getElementById('grid');

  if (!grid) {
    alert('Grid NOT found'); // we’ll see this if the <div id="grid"> isn’t in the DOM
  } else {
    // make the grid visible so we can’t miss it
    grid.style.border = '2px solid red';
    grid.style.minHeight = '80px';
    grid.style.padding = '6px';

    // try writing a simple green box
    grid.innerHTML = '<div style="width:40px;height:40px;background:green;margin:4px;">1</div>';

    alert('Grid found and cell inserted');
  }
</script>
</body>
</html>




  
