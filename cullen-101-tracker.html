<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cullen Commission — 101 Recommendations Tracker</title>

  <style>
    :root{
      --bg:#0b0f19; --card:#121827; --muted:#9aa4b2; --text:#e5e7eb;
      --accent:#6ee7b7; --warn:#facc15; --todo:#ef4444; --unknown:#6b7280;
      --tooltip:#111827; --tooltip-text:#e5e7eb; --tooltip-shadow:0 8px 24px rgba(0,0,0,.35);
      --link:#66b3ff; /* brighter for contrast */
    }

    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    h1{margin:0 0 8px}
    p{color:var(--muted);margin:0 0 16px}
    .card{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.2)}
    .legend{display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
    .legend-item{display:flex;align-items:center;gap:6px;color:var(--muted);font-size:14px}
    .swatch{width:14px;height:14px;border-radius:4px;display:inline-block}
    #grid{display:grid;grid-template-columns:repeat(10,1fr);gap:6px;margin-top:12px}
    .cell{
      width:30px;height:30px;border-radius:6px;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      font-size:10px;font-weight:bold;color:#000;user-select:none;outline:none
    }
    .cell:focus{box-shadow:0 0 0 2px rgba(255,255,255,.25)}
    .done{background:var(--accent)}
    .progress{background:var(--warn)}
    .todo{background:var(--todo);color:#fff}
    .unknown{background:var(--unknown);color:#fff}
    .note{color:var(--muted);font-size:12px;margin-top:10px;line-height:1.4}

    /* Tooltip (single, global) */
    .tooltip{
      position:fixed; z-index:9999; max-width:min(520px,92vw);
      background:var(--tooltip); color:var(--tooltip-text);
      padding:10px 12px; border-radius:10px; box-shadow:var(--tooltip-shadow);
      font-size:12px; line-height:1.35; display:none;
      pointer-events:auto;
    }
    .tooltip strong{font-weight:600}
    .tooltip .status{opacity:.9;font-style:italic;display:block;margin-top:6px}
    .tooltip .sources{margin-top:8px;border-top:1px solid rgba(255,255,255,.08);padding-top:6px}
    .tooltip .sources-title{font-size:11px;opacity:.8;margin-bottom:4px;display:block}
    .tooltip .sources ul{margin:0;padding-left:16px}
    .tooltip a,
    .tooltip a:visited{color:var(--link);text-decoration:underline;word-break:break-word}
    .tooltip a:hover,
    .tooltip a:focus{text-decoration-thickness:2px}
  </style>
</head>

<body>
  <div class="wrap">
    <h1>Cullen Commission — 101 Recommendations Tracker</h1>
    <p>Hover or focus a box to see the full recommendation text, status, and sources. Gray = not yet verified from public sources.</p>

    <div class="card">
      <div class="legend" aria-hidden="true">
        <div class="legend-item"><span class="swatch" style="background:var(--accent)"></span> Done (verified)</div>
        <div class="legend-item"><span class="swatch" style="background:var(--warn)"></span> In&nbsp;Progress (verified)</div>
        <div class="legend-item"><span class="swatch" style="background:var(--unknown)"></span> Unknown / Unverified</div>
        <div class="legend-item"><span class="swatch" style="background:var(--todo)"></span> Not&nbsp;Done (verified gap)</div>
      </div>

      <div id="grid" role="grid" aria-label="Cullen recommendations grid"></div>
      <div class="note">We only color items where we’ve found solid sources. Everything else stays gray until verified.</div>
    </div>
  </div>

  <!-- Single global tooltip -->
  <div id="tooltip" class="tooltip" role="dialog" aria-hidden="true"></div>

  <script>
    /* --- Full recommendation texts --- */
    const recommendations = [
      "Rec 1: Establish an independent Anti-Money Laundering (AML) Commissioner.",
      "Rec 2: Maintain the Deputy Ministers’ Committee on AML and the AML Secretariat.",
      "Rec 3: Require AML liaison officers across agencies.",
      "Rec 4: Lower casino source-of-funds threshold to $3,000.",
      "Rec 5: Implement 100% account-based known play at casinos.",
      // ... (leave the rest of your recs here, unchanged) ...
      "Rec 101: Develop unexplained wealth order regime in BC."
    ];

    const statusByRec = {1:"unknown",4:"todo",25:"done",33:"done",52:"progress",69:"done",71:"done",72:"done",78:"done",85:"done",89:"done",91:"done",96:"done",100:"done",101:"done"};

    const sourcesByRec = {
      1:[
        "Premier says no AML 'czar'; government not creating an independent AML Commissioner",
        "https://www.vancouverisawesome.com/highlights/bc-premier-ditches-chief-anti-money-laundering-recommendation-8359675"
      ],
      4:[
        "BC Gov — Gambling: Proof of source-of-funds threshold remains at $10,000 (not lowered to $3,000 as Cullen recommended)",
        "https://www2.gov.bc.ca/gov/content/justice/anti-money-laundering/quick-glance-government-actions/gambling"
      ],
      25:[
        "BC Gov – Real Estate: mortgage brokers/lenders under PCMLTFA (Oct 2024)",
        "https://www2.gov.bc.ca/gov/content/justice/anti-money-laundering/quick-glance-government-actions/real-estate"
      ]
      // ... (keep the rest of your sourcesByRec as you had them) ...
    };

    const grid = document.getElementById('grid');
    const tooltip = document.getElementById('tooltip');

    let hideTimer = null;
    function clearHideTimer(){ if(hideTimer){ clearTimeout(hideTimer); hideTimer=null; } }

    function scheduleHideIfOutside(to){
      if(to && (to===tooltip || tooltip.contains(to))) return;
      clearHideTimer();
      hideTimer=setTimeout(()=>{
        if(tooltip.matches(':hover')) return;
        hideTooltip();
      },180);
    }

    function autoLink(text){
      const urlRegex=/(https?:\/\/[^\s)]+)|((?:www\.)[^\s)]+)/gi;
      return text.replace(urlRegex,(m)=>{
        const url=m.startsWith('http')?m:`https://${m}`;
        return `<a href="${url}" target="_blank" rel="noopener noreferrer">${m}</a>`;
      });
    }

    function showTooltip(target, html){
      clearHideTimer();
      tooltip.innerHTML=html;
      tooltip.style.display='block';
      tooltip.setAttribute('aria-hidden','false');
      const rect=target.getBoundingClientRect(), pad=8;
      const ttRect=tooltip.getBoundingClientRect();
      let top=rect.top-ttRect.height-pad; if(top<8) top=rect.bottom+pad;
      let left=rect.left+(rect.width-ttRect.width)/2;
      left=Math.max(8,Math.min(left,window.innerWidth-ttRect.width-8));
      tooltip.style.top=`${top}px`;
      tooltip.style.left=`${left}px`;
      target.setAttribute('aria-describedby','tooltip');
    }

    function hideTooltip(){
      clearHideTimer();
      tooltip.style.display='none';
      tooltip.setAttribute('aria-hidden','true');
      tooltip.innerHTML='';
      const active=document.querySelector('[aria-describedby="tooltip"]');
      if(active) active.removeAttribute('aria-describedby');
    }

    // Build grid
    for(let n=1;n<=101;n++){
      const status=statusByRec[n]||"unknown";
      const cell=document.createElement('div');
      cell.className=`cell ${status}`;
      cell.textContent=n;
      cell.setAttribute('role','gridcell');
      cell.setAttribute('tabindex','0');
      const recText=recommendations[n-1]||`Recommendation ${n}`;
      cell.setAttribute('aria-label',recText);
      const src=sourcesByRec[n];
      let html=`<strong>${recText}</strong><span class="status">${status}</span>`;
      if(src&&src.length>0){
        html+=`<div class="sources"><span class="sources-title">Sources:</span><ul>`;
        for(const s of src) html+=`<li>${autoLink(s)}</li>`;
        html+=`</ul></div>`;
      } else {
        html+=`<div class="sources"><span class="sources-title">Sources:</span><ul><li><em>not yet verified</em></li></ul></div>`;
      }
      cell.addEventListener('mouseenter',()=>showTooltip(cell,html));
      cell.addEventListener('focus',()=>showTooltip(cell,html));
      cell.addEventListener('mouseleave',(e)=>scheduleHideIfOutside(e.relatedTarget));
      cell.addEventListener('blur',()=>scheduleHideIfOutside(document.activeElement));
      grid.appendChild(cell);
    }

    tooltip.addEventListener('mouseenter',clearHideTimer);
    tooltip.addEventListener('mouseleave',(e)=>scheduleHideIfOutside(e.relatedTarget));
    window.addEventListener('scroll',hideTooltip,{passive:true});
    window.addEventListener('resize',hideTooltip);
    window.addEventListener('keydown',e=>{if(e.key==="Escape")hideTooltip();});
  </script>
</body>
</html>

  

  
      
     
      
     
     
      
    
    
        


